(this.webpackJsonpstat_wars=this.webpackJsonpstat_wars||[]).push([[0],{14:function(i,e,t){},15:function(i,e,t){},25:function(i,e,t){"use strict";t.r(e);var n=t(2),o=t.n(n),r=t(8),a=t.n(r),s=(t(14),t(15),t(3)),l=t(4),c=t(0),d=t.n(c),u=t(9),h=0,v=0;var y=t(6),m=t.n(y),p=(d.a.Engine,d.a.Render,d.a.Runner,d.a.Composites,d.a.Composite),f=(d.a.Common,d.a.World,d.a.Bodies),g=(d.a.Grid,d.a.MouseConstraint,d.a.Mouse,d.a.Body,d.a.Events,function(){function i(e,t,n){Object(s.a)(this,i),this.idx=i.idx++,this.max_health=100,this.health=this.max_health,this.env=n,this.world=this.env.world,this.color=i.pallete[this.idx%i.pallete.length],this.original_color=i.pallete[this.idx%i.pallete.length],this.shape=this._build_shape(e,t)}return Object(l.a)(i,[{key:"_build_shape",value:function(i,e){var t={isStatic:!0,render:{fillStyle:this.color.string(),strokeStyle:"white",lineWidth:3},collisionFilter:this.collision_filter},n=f.rectangle(i,e,30,30,t);return n.player=this,n.is_player=!0,n}},{key:"collision_filter",get:function(){var i=1<<this.idx+1;return{category:i,mask:-1^i,group:0}}},{key:"build_emmiter",value:function(){var i={amount:1/0,interval:1001,amountPerTick:1,size:{min:5,max:20},delay:1e4,collisions:!0,restituition:1,colors:this.original_color.string(),collisionFilter:this.collision_filter,frictionStatic:0,frictionAir:0,friction:0,decaySpeed:.03};this.emmiter=this.env.particle_factory.emitter.create(this.x,this.y,i),this.emmiter.start()}},{key:"x",get:function(){return this.shape.position.x}},{key:"y",get:function(){return this.shape.position.y}},{key:"take_damage",value:function(i){this.health-=i,this.health<=0&&this.die();var e=this.health/this.max_health;this.color=this.color.alpha(e),this.shape.render.fillStyle=this.color.string()}},{key:"die",value:function(){console.log("Player ".concat(this.idx," DIED")),p.remove(this.world,this.shape),this.emmiter.stop(),this.dead=!0}}],[{key:"pallete",get:function(){return"#F51720 #FA26A0 #F8D210 #2FF3E0".split(" ").map((function(i){return new m.a(i)}))}}]),i}());g.idx=0,d.a.Resolver._restingThresh=.1,d.a.Resolver._restingThreshTangent=1,console.clear();var w=d.a.Engine,x=d.a.Render,b=d.a.Runner,_=(d.a.Composites,d.a.Composite),S=(d.a.Common,d.a.World,d.a.Bodies),k=(d.a.Grid,d.a.MouseConstraint),F=d.a.Mouse,A=(d.a.Body,d.a.Events);window.H=600,window.W=800;var B=function(){function i(){Object(s.a)(this,i),this.title="Env",this.for=">=0.14.2"}return Object(l.a)(i,[{key:"setup",value:function(i){this.engine=w.create({velocityIterations:8}),this.engine.gravity.scale=0,this.world=this.engine.world,this.particle_factory=function(i){i.particles={};var e={defaults:{colors:["#FE601C","#EBDB14","#EB471F","#ED7A0E"],collisions:!1,isStatic:!1,x:window.innerWidth/2,y:window.innerHeight/2,size:{min:.5,max:2},amount:50,interval:0,amountPerTick:1,velocity:{x:5,y:5,direction:{x:"none",y:"none"}},delay:400,decaySpeed:.1,frictionAir:.02,parent:void 0,collisionFilter:void 0},engine:{defaults:{canvas:void 0,width:window.innerWidth,height:window.innerHeight,background:"transparent",wireframes:!1,showBroadphase:!1}},emitter:{random:function(i,e){return void 0===i&&void 0===e?(i=0,e=1):void 0===e&&(e=i,i=0),Math.random()*(e-i)+i},create:function(i,t,n){var o=e.defaults;void 0===n&&(n=o),void 0===n.collisions&&(n.collisions=o.collisions),void 0===n.isStatic&&(n.isStatic=o.isStatic),void 0===n.size?n.size=o.size:"number"===typeof n.size&&(n.size={min:n.size,max:n.size}),void 0===n.amount&&(n.amount=o.amount),void 0===n.interval&&(n.interval=o.interval),void 0===n.velocity&&(n.velocity=o.velocity),void 0===n.velocity.direction?n.velocity.direction=o.velocity.direction:void 0===n.velocity.direction.x?n.velocity.direction.x=o.velocity.direction.x:void 0===n.velocity.direction.y&&(n.velocity.direction.y=o.velocity.direction.y),void 0===n.colors?n.colors=o.colors:"string"===typeof n.colors&&(n.colors=[n.colors]),void 0===n.delay&&(n.delay=o.delay),void 0===n.frictionAir&&(n.frictionAir=o.frictionAir),void 0===n.parent&&(n.parent=o.parent),void 0===n.collisionFilter&&(n.collisionFilter=o.collisionFilter),(void 0===n.amountPerTick||n.amountPerTick<1)&&(n.amountPerTick=o.amountPerTick),void 0===n.decaySpeed&&(n.decaySpeed=o.decaySpeed),n.decaySpeed<0&&(n.decaySpeed=0),n.decaySpeed>1&&(n.decaySpeed=1),n.collisions=!n.collisions,void 0===i&&(i=o.x),void 0===t&&(t=o.y);var r=n.velocity.direction;"string"===typeof r.y&&(r.y=r.y.toLowerCase(),"up"===r.y?n.velocity.direction.y=-1:"down"===r.y?n.velocity.direction.y=1:"none"===r.y&&(n.velocity.direction.y=0)),"string"===typeof r.x&&(r.x=r.x.toLowerCase(),"left"===r.x?n.velocity.direction.x=-1:"right"===r.x?n.velocity.direction.x=1:"none"===r.x&&(n.velocity.direction.x=0));var a={pos:{x:i,y:t},options:n,running:!1,stop:function(){var i=this,e=this.options.amount;this.options.amount=0,this.running=!1,requestAnimationFrame((function(){requestAnimationFrame((function(){i.options.amount=e}))}))},start:function(){e.emitter.explode(this)}};return a.explode=a.start,a},explode:function(t){t.running=!0;var n=e.emitter.random;v=0,function e(o){var r=t.pos,a=r.x,s=r.y,l=t.options,d=l.delay/i.engine.timing.timeScale,y=l.size,m=l.colors,p=l.velocity,f=l.amount,g=l.interval,w=l.collisions,x=l.frictionAir,b=l.velocity.direction,_=l.collisionFilter,S=l.amountPerTick;if(h++,v++,void 0!==t.options.parent){var k=t.options.parent;if(r=k.position,t.pos=r,"Circle Body"===k.label){var F=Math.random()*Math.PI*2,A=Math.random()*k.circleRadius;a=A*Math.cos(F)+a,s=A*Math.sin(F)+s}else"Rectangle Body"===k.label&&(a=Math.random()*(k.bounds.max.x-k.bounds.min.x)+k.bounds.min.x,s=Math.random()*(k.bounds.max.y-k.bounds.min.y)+k.bounds.min.y)}var B="particle"+h,j=n(y.min,y.max),C=m[Math.round(n(m.length))];"random"===(C=void 0!==C?C:m[0])&&(C="rgb("+n(0,255)+", "+n(0,255)+", "+n(0,255)+")");var E,M={friction:(E=t.options).friction,frictionStatic:E.frictionStatic,inertia:E.inertia};i.particles[B]=c.Bodies.polygon(a,s,6,j,Object(u.a)({isSensor:w,isParticle:!0,isStatic:t.options.isStatic,density:1,restitution:t.options.restituition,frictionAir:x,decaySpeed:l.decaySpeed,render:{fillStyle:C}},M));var T=i.particles[B];c.World.add(i.world,T),void 0!==_&&(T.collisionFilter=_);var P=n(0,p.x),R=n(0,p.y);void 0===p.y&&(R=n(0,2)),void 0===p.x&&(P=n(0,2)),void 0===b.x||0===b.x?P=Boolean(Math.round(n()))?P:-1*P:P*=b.x,void 0===b.y||0===b.y?R=Boolean(Math.round(n()))?R:-1*R:R*=b.y,c.Body.setVelocity(T,{x:P,y:R});var O=1;if(setTimeout((function e(){O-=l.decaySpeed*i.engine.timing.timeScale,T.circleRadius=j*O,T.circleRadius>l.decaySpeed?requestAnimationFrame(e):c.Composite.remove(i.world,T)}),d),v<f&&!o)if(g>0){var z=0;requestAnimationFrame((function n(){if(t.options.amount>0)if(z+=i.engine.timing.timeScale,void 0!==i.runner&&void 0!==i.runner.fps)if(z>=g/(1e3/i.runner.fps))if(S>1)for(var o=S;o--;)0!==o?e(!0):e();else e();else requestAnimationFrame(n);else if(z>=g/16.67/i.engine.timing.timeScale)for(var r=S;r--;)0!==r?e(!0):e();else requestAnimationFrame(n);else t.running=!1}))}else e()}()}}};return e}(this);var e=x.create({element:document.getElementById(i),engine:this.engine,options:{width:800,height:600,showAngleIndicator:!0,showDebug:!1,wireframes:!1}});this.render=e,x.run(e);var t=b.create();this.build_play_field(),this.add_mouse_control(),this.build_players(),this.register_events(),b.run(t,this.engine),x.lookAt(e,{min:{x:0,y:0},max:{x:800,y:600}})}},{key:"add_mouse_control",value:function(){var i=F.create(this.render.canvas),e=k.create(this.engine,{mouse:i,constraint:{stiffness:.2,render:{visible:!0}}});_.add(this.world,e),this.render.mouse=i}},{key:"stop",value:function(){d.a.Render.stop(this.render),d.a.Runner.stop(this.runner)}},{key:"build_players",value:function(){var i=new g(120,window.H/2,this),e=new g(window.W-120,window.H/2,this);_.add(this.world,i.shape),_.add(this.world,e.shape),this.players=[i,e],this.players.map((function(i){return i.build_emmiter()}))}},{key:"build_play_field",value:function(){var i={isStatic:!0};_.add(this.world,[S.rectangle(400,0,800,100,i),S.rectangle(400,600,800,100,i),S.rectangle(800,300,100,600,i),S.rectangle(0,300,100,600,i)])}},{key:"register_events",value:function(){var i=this.particle_factory;A.on(this.engine,"collisionStart",(function(e){var t=e.pairs;t=t.filter((function(i,e){return i.bodyA.is_player||i.bodyB.is_player}));for(var n=0;n<t.length;n++){var o=t[n],r=o.bodyA.is_player?o.bodyA:o.bodyB,a=o.bodyA.is_player?o.bodyB:o.bodyA;r=r.player,a.isParticle&&(_.remove(this.world,a),j(a.position,i)),r.take_damage(21)}}))}}]),i}();function j(i,e){e.emitter.create(i.x,i.y,{collisions:!1,amount:40,amountPerTick:10,interval:1,collisionFilter:{group:-1}}).start()}function C(){window.env=new B,window.document.getElementById("canvas").innerHTML="",window.env.setup("canvas")}window.restart=C;var E=t(1);var M=function(){return Object(n.useEffect)((function(){C()})),Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)("button",{onClick:window.restart,children:" RESTART "}),Object(E.jsx)("div",{id:"info"}),Object(E.jsx)("div",{id:"canvas",children:" "})]})},T=function(i){i&&i instanceof Function&&t.e(3).then(t.bind(null,26)).then((function(e){var t=e.getCLS,n=e.getFID,o=e.getFCP,r=e.getLCP,a=e.getTTFB;t(i),n(i),o(i),r(i),a(i)}))};a.a.render(Object(E.jsx)(o.a.StrictMode,{children:Object(E.jsx)(M,{})}),document.getElementById("root")),T()}},[[25,1,2]]]);
//# sourceMappingURL=main.68880c32.chunk.js.map