(this.webpackJsonpstat_wars=this.webpackJsonpstat_wars||[]).push([[0],{399:function(e,t,i){},400:function(e,t,i){},415:function(e,t){},416:function(e,t){},424:function(e,t){},427:function(e,t){},428:function(e,t){},574:function(e,t,i){"use strict";i.r(t);var n=i(41),a=i.n(n),o=i(343),r=i.n(o),s=(i(399),i(5)),c=(i(400),i(3)),l=i(9),d=i(43),u=i.n(d),h=i(370),v=i(56),m=["owner","env"],p=function(){function e(t){if(Object(c.a)(this,e),this.env=void 0,void 0!==t.particle_factory)throw new Error("Only one factory per env");this.env=t}return Object(l.a)(e,[{key:"create",value:function(e,t,i){return new y(e,t,Object(v.a)({env:this.env},i))}}]),e}(),y=function(){function e(t,i,n){var a=n.owner,o=n.env,r=Object(h.a)(n,m);Object(c.a)(this,e),this.env=void 0,this.particlesAdded=void 0,this.pos=void 0,this.options=void 0,this.running=void 0,this.owner=void 0,this.env=o,this.particlesAdded=0;var s=e.defaults;void 0===r&&(r=s),void 0===r.collisions&&(r.collisions=s.collisions),void 0===r.isStatic&&(r.isStatic=s.isStatic),void 0===r.size?r.size=s.size:"number"===typeof r.size&&(r.size={min:r.size,max:r.size}),void 0===r.amount&&(r.amount=s.amount),void 0===r.interval&&(r.interval=s.interval),void 0===r.velocity&&(r.velocity=s.velocity),void 0===r.velocity.direction?r.velocity.direction=s.velocity.direction:void 0===r.velocity.direction.x?r.velocity.direction.x=s.velocity.direction.x:void 0===r.velocity.direction.y&&(r.velocity.direction.y=s.velocity.direction.y),void 0===r.colors?r.colors=s.colors:"string"===typeof r.colors&&(r.colors=[r.colors]),void 0===r.delay&&(r.delay=s.delay),void 0===r.frictionAir&&(r.frictionAir=s.frictionAir),void 0===r.parent&&(r.parent=s.parent),void 0===r.collisionFilter&&(r.collisionFilter=s.collisionFilter),(void 0===r.amountPerTick||r.amountPerTick<1)&&(r.amountPerTick=s.amountPerTick),void 0===r.decaySpeed&&(r.decaySpeed=s.decaySpeed),r.decaySpeed<0&&(r.decaySpeed=0),r.decaySpeed>1&&(r.decaySpeed=1),r.collisions=!r.collisions,void 0===t&&(t=s.x),void 0===i&&(i=s.y);var l=r.velocity.direction;"string"===typeof l.y&&(l.y=l.y.toLowerCase(),"up"===l.y?r.velocity.direction.y=-1:"down"===l.y?r.velocity.direction.y=1:"none"===l.y&&(r.velocity.direction.y=0)),"string"===typeof l.x&&(l.x=l.x.toLowerCase(),"left"===l.x?r.velocity.direction.x=-1:"right"===l.x?r.velocity.direction.x=1:"none"===l.x&&(r.velocity.direction.x=0)),this.pos={x:t,y:i},this.options=r,this.running=!1,this.owner=a}return Object(l.a)(e,[{key:"stop",value:function(){var e=this,t=this.options.amount;this.options.amount=0,this.running=!1,requestAnimationFrame((function(){requestAnimationFrame((function(){e.options.amount=t}))}))}},{key:"start",value:function(){this.running=!0,this.particlesAdded=0,this.addParticle()}},{key:"addParticle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this,n=this.pos,a=n.x,o=n.y,r=this.options,s=r.delay/this.env.engine.timing.timeScale,c=r.size,l=r.colors,u=r.velocity,h=r.amount,m=r.interval,p=r.collisions,y=r.frictionAir,g=r.velocity.direction,_=r.collisionFilter,b=r.amountPerTick;if(e.numParticles++,this.particlesAdded++,void 0!==this.options.parent){var w=this.options.parent;if(n=w.position,this.pos=n,"Circle Body"===w.label){var x=Math.random()*Math.PI*2,j=Math.random()*w.circleRadius;a=j*Math.cos(x)+a,o=j*Math.sin(x)+o}else"Rectangle Body"===w.label&&(a=Math.random()*(w.bounds.max.x-w.bounds.min.x)+w.bounds.min.x,o=Math.random()*(w.bounds.max.y-w.bounds.min.y)+w.bounds.min.y)}var O="particle"+e.numParticles,k=f(c.min,c.max),S=l[Math.round(f(l.length))];if("random"===(S=void 0!==S?S:l[0])){var P=f(0,255),A=f(0,255),F=f(0,255);S="rgb("+P+", "+A+", "+F+")"}var B,M={friction:(B=this.options).friction,frictionStatic:B.frictionStatic,inertia:B.inertia},T=d.Bodies.polygon(a,o,6,k,Object(v.a)({isSensor:p,isStatic:this.options.isStatic,density:1,restitution:this.options.restituition,frictionAir:y,render:{fillStyle:S}},M));T.decaySpeed=r.decaySpeed,T.isParticle=!0,T.owner=this.owner,this.env.particles[O]=T,d.Composite.add(this.env.world,T),void 0!==_&&(T.collisionFilter=_);var E=f(0,u.x),C=f(0,u.y);void 0===u.y&&(C=f(0,2)),void 0===u.x&&(E=f(0,2)),void 0===g.x||0===g.x?E=Boolean(Math.round(f()))?E:-1*E:E*=g.x,void 0===g.y||0===g.y?C=Boolean(Math.round(f()))?C:-1*C:C*=g.y,d.Body.setVelocity(T,{x:E,y:C});var R=1;function H(){R-=r.decaySpeed*i.env.engine.timing.timeScale,T.circleRadius=k*R,T.circleRadius>r.decaySpeed?requestAnimationFrame(H):d.Composite.remove(i.env.world,T)}if(setTimeout(H,s),this.particlesAdded<h&&!t)if(m>0){var D=function e(){if(i.options.amount>0)if(z+=i.env.engine.timing.timeScale,void 0!==i.env.runner&&void 0!==i.env.runner.fps)if(z>=m/(1e3/i.env.runner.fps))if(b>1)for(var t=b;t--;)0!==t?i.addParticle(!0):i.addParticle();else i.addParticle();else requestAnimationFrame(e);else if(z>=m/16.67/i.env.engine.timing.timeScale)for(var n=b;n--;)0!==n?i.addParticle(!0):i.addParticle();else requestAnimationFrame(e);else i.running=!1},z=0;requestAnimationFrame(D)}else i.addParticle()}}]),e}();function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===e&&void 0===t?(e=0,t=1):void 0===t&&(t=e,e=0),Math.random()*(t-e)+e}y.numParticles=0,y.defaults={colors:["#FE601C","#EBDB14","#EB471F","#ED7A0E"],collisions:!1,isStatic:!1,x:window.innerWidth/2,y:window.innerHeight/2,size:{min:.5,max:2},amount:50,interval:0,amountPerTick:1,velocity:{x:5,y:5,direction:{x:"none",y:"none"}},delay:400,decaySpeed:.1,frictionAir:.02,parent:void 0,collisionFilter:void 0};var g=i(344),_=i.n(g),b="#F51720 #FA26A0 #F8D210 #2FF3E0".split(" ").map((function(e){return new _.a(e)})),w=function(){function e(t,i,n,a){var o=a.max_health,r=a.name,s=a.damage_per_ball;Object(c.a)(this,e),this.shape=void 0,this.health=void 0,this.max_health=void 0,this.died_at=void 0,this.damage_dealt=void 0,this.idx=void 0,this.env=void 0,this.world=void 0,this.color=void 0,this.original_color=void 0,this.emitter=void 0,this.name=void 0,this.damage_per_ball=void 0,this.idx=e.idx++,this.max_health=o,this.health=this.max_health,this.env=n,this.world=this.env.world,this.color=b[this.idx%b.length],this.original_color=b[this.idx%b.length],this.shape=this._build_shape(t,i),this.damage_per_ball=s,this.damage_dealt=0,this.died_at=null,this.name=r}return Object(l.a)(e,[{key:"_build_shape",value:function(e,t){var i={isStatic:!0,render:{fillStyle:this.color.string(),strokeStyle:"white",lineWidth:3},collisionFilter:this.collision_filter},n=d.Bodies.rectangle(e,t,30,30,i);return n.player=this,n}},{key:"collision_filter",get:function(){var e=1<<this.idx+1;return{category:e,mask:-1^e,group:0}}},{key:"build_emitter",value:function(){var e={amount:1/0,interval:1001,amountPerTick:1,size:{min:5,max:20},delay:1e4,collisions:!0,restituition:1,colors:this.original_color.string(),collisionFilter:this.collision_filter,frictionStatic:0,frictionAir:0,friction:0,decaySpeed:.03};this.emitter=this.env.particle_factory.create(this.x,this.y,Object(v.a)({owner:this},e)),this.emitter.start()}},{key:"x",get:function(){return this.shape.position.x}},{key:"y",get:function(){return this.shape.position.y}},{key:"take_damage",value:function(e){this.health-=e,this.health<=0&&this.die();var t=this.health/this.max_health;return this.color=this.color.alpha(t),this.shape.render.fillStyle=this.color.string(),e}},{key:"die",value:function(){console.log("Player ".concat(this.idx," DIED")),d.Composite.remove(this.world,this.shape),this.emitter.stop(),this.died_at=new Date}}]),e}();w.idx=0,u.a.Resolver._restingThresh=.1,u.a.Resolver._restingThreshTangent=1,console.clear(),window.H=600,window.W=800;var x=function(){function e(t){Object(c.a)(this,e),this.game_state_callback=void 0,this.engine=void 0,this.world=void 0,this.particle_factory=void 0,this.render=void 0,this.runner=void 0,this.particles=void 0,this.players=void 0,this.title="Env",this.for=">=0.14.2",this.particles={},this.engine=d.Engine.create({velocityIterations:8}),this.engine.gravity.scale=0,this.world=this.engine.world,this.particle_factory=new p(this),this.game_state_callback=t}return Object(l.a)(e,[{key:"setup",value:function(e,t){var i=d.Render.create({element:document.getElementById(e),engine:this.engine,options:{width:800,height:600,wireframes:!1,showDebug:!1,showAngleIndicator:!0}});this.render=i,d.Render.run(i),this.runner=d.Runner.create(),this.build_play_field(),this.add_mouse_control(),this.build_players(t),this.update_game_state(),this.register_events(),d.Runner.run(this.runner,this.engine),d.Render.lookAt(i,{min:{x:0,y:0},max:{x:800,y:600}})}},{key:"add_mouse_control",value:function(){var e=d.Mouse.create(this.render.canvas),t=d.MouseConstraint.create(this.engine,{mouse:e,constraint:{stiffness:2e-4,render:{visible:!0}}});d.Composite.add(this.world,t),this.render.mouse=e}},{key:"stop",value:function(){u.a.Render.stop(this.render),u.a.Runner.stop(this.runner)}},{key:"get_player_coords",value:function(e){if(2!==e)throw new Error("only 2 players supported");return[[121,window.H/2],[window.W-121,window.H/2]]}},{key:"build_players",value:function(e){var t=this;this.players=[];var i=this.get_player_coords(e.length);e.forEach((function(e,n){var a=Object(s.a)(i[n],2),o=a[0],r=a[1],c=new w(o,r,t,e);t.players.push(c),d.Composite.add(t.world,c.shape)})),this.players.map((function(e){return e.build_emitter()}))}},{key:"build_play_field",value:function(){var e={isStatic:!0};d.Composite.add(this.world,[d.Bodies.rectangle(400,0,800,100,e),d.Bodies.rectangle(400,600,800,100,e),d.Bodies.rectangle(800,300,100,600,e),d.Bodies.rectangle(0,300,100,600,e)])}},{key:"update_game_state",value:function(){var e=this;if(this.game_state_callback){var t=this.players.map((function(e){return{health:e.health,died_at:e.died_at||null,damage_dealt:e.damage_dealt}}));setTimeout((function(){return e.game_state_callback(t)}),0)}}},{key:"register_events",value:function(){var e=this;d.Events.on(this.engine,"collisionStart",(function(t){var i=t.pairs;i=i.filter((function(e,t){return e.bodyA.player||e.bodyB.player}));for(var n=0;n<i.length;n++){var a=i[n],o=a.bodyA.player?a.bodyA:a.bodyB,r=a.bodyA.player?a.bodyB:a.bodyA,s=o.player;r.isParticle&&(d.Composite.remove(e.world,r),j(r.position,e.particle_factory));var c=r.owner.damage_per_ball;s.take_damage(c),r.owner,r.owner.damage_dealt+=c,e.update_game_state()}}))}}]),e}();function j(e,t){t.create(e.x,e.y,{collisions:!1,amount:40,amountPerTick:10,interval:1,collisionFilter:{group:-1}}).start()}var O=i(17),k=i(347),S=i(345),P=i(346),A=i.n(P),F=i(57),B=[{Header:"Health",accessor:"game.health"},{Header:"Died at",accessor:"game.died_at_string"},{Header:"Rank",accessor:"game.rank"},{Header:"Damage Dealt",accessor:"game.damage_dealt"}],M={max_health:"Max Health",name:"Player Name",damage_per_ball:"Damage per Ball"};function T(e,t,i){return Object.entries(t).map((function(e){var n,a,o,r=Object(s.a)(e,2),c=r[0];r[1];return n=c,a=t[c],o=i[c],{Header:"".concat(M[n]," = ").concat(a," ").concat(o?" x "+o:""),accessor:n}}))}function E(e){e.stats;var t=e.attributes,i=e.stats_to_attributes,a=e.game_state,o=e.start_time,r=e.multipliers,s=Object(n.useMemo)((function(){var e=T(0,i,r);return[e[0]].concat(B,Object(O.a)(e.splice(1)))}),[t,r,i]),c=function(e,t,i){if(null===e)return t;for(var n=function(e){var t=Object(O.a)(new Set(e)).sort((function(e,t){return t-e})),i=new Map(t.map((function(e,t){return[e,t+1]})));return e.map((function(e){return i.get(e)}))}(e.map((function(e){return null!==e.died_at?-e.died_at:0}))),a=A()(t),o=0;o<a.length;o++)a[o].game=Object(v.a)({},e[o]),null!==a[o].game.died_at&&(a[o].game.died_at_string=((a[o].game.died_at-i)/1e3).toFixed(1)+"s"),null!==n&&(a[o].game.rank=n[o]);return a}(a,t,o),l=Object(S.useTable)({columns:s,data:c}),d=l.getTableProps,u=l.getTableBodyProps,h=l.headerGroups,m=l.rows,p=l.prepareRow;return Object(F.jsxs)(k.a,Object(v.a)(Object(v.a)({},d()),{},{striped:!0,bordered:!0,hover:!0,children:[Object(F.jsx)("thead",{children:h.map((function(e){return Object(F.jsx)("tr",Object(v.a)(Object(v.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(F.jsx)("th",Object(v.a)(Object(v.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(F.jsx)("tbody",Object(v.a)(Object(v.a)({},u()),{},{children:m.map((function(e){return p(e),Object(F.jsx)("tr",Object(v.a)(Object(v.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(F.jsx)("td",Object(v.a)(Object(v.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))}i(410);var C=i(369),R=i(18),H=i(97),D=function(){function e(){Object(c.a)(this,e),this.multipliers={}}return Object(l.a)(e,[{key:"normalize_stat",value:function(e,t){var i=e.mean(),n=Math.pow(10,Math.round(Math.log10(t/i))),a=[.2,.5,1,2,5],o=a.map((function(e){return Math.abs(t-i*n*e)}));return n*=a[I(o)],this.multipliers[e.column_names]=n,e.mul(n)}}]),e}();var z,I=(z=function(e,t){return t[0]<e[0]?t:e},function(e){return e.map((function(e,t){return[e,t]})).reduce(z)[1]});window.env=new x;var q=[{team:"Vasco",goals:52,victories:22},{team:"Botafogo",goals:65,victories:22}],L={name:"team",max_health:"goals",damage_per_ball:"victories"},W=function(e,t){var i,n=[],a=Object(R.a)(e);try{for(a.s();!(i=a.n()).done;){var o=i.value,r={};for(var s in t){var c=t[s];r[s]=o[c]}n.push(r)}}catch(l){a.e(l)}finally{a.f()}return function(e){var t,i=new D,n=new H.a(e);for(var a in window.df=n,t={damage_per_ball:i.normalize_stat(n.damage_per_ball,20),max_health:i.normalize_stat(n.max_health,100),name:n.name})t[a]=t[a].values;var o=(t=new H.a(t)).columns;return[t=(t=t.values).map((function(e){return function(e,t){for(var i={},n=0;n<e.length;++n)i[e[n]]=t[n];return i}(o,e)})),i.multipliers]}(n)}(q,L),G=Object(s.a)(W,2),J=G[0],N=G[1];var V=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),i=t[0],a=t[1],o=Object(n.useState)(new Date),r=Object(s.a)(o,2),c=r[0],l=r[1];return window.env.game_state_callback=a,Object(n.useEffect)((function(){window.document.getElementById("canvas").innerHTML="",window.env.setup("canvas",J)}),[]),Object(F.jsxs)("div",{className:"App",children:[Object(F.jsx)(C.a,{onClick:function(){window.env=new x(a),window.document.getElementById("canvas").innerHTML="",window.env.setup("canvas",J),l(new Date)},children:" RESTART "}),Object(F.jsx)(E,{stats:q,attributes:J,stats_to_attributes:L,game_state:i,start_time:c,multipliers:N})]})},K=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,577)).then((function(t){var i=t.getCLS,n=t.getFID,a=t.getFCP,o=t.getLCP,r=t.getTTFB;i(e),n(e),a(e),o(e),r(e)}))};r.a.render(Object(F.jsx)(a.a.StrictMode,{children:Object(F.jsx)(V,{})}),document.getElementById("root")),K()}},[[574,1,2]]]);
//# sourceMappingURL=main.732d3d92.chunk.js.map