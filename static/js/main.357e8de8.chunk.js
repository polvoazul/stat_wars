(this.webpackJsonpstat_wars=this.webpackJsonpstat_wars||[]).push([[0],{410:function(e,t,i){},411:function(e,t,i){},426:function(e,t){},427:function(e,t){},435:function(e,t){},438:function(e,t){},439:function(e,t){},589:function(e,t,i){"use strict";i.r(t);var n=i(25),a=i.n(n),r=i(352),o=i.n(r),s=(i(410),i(5)),c=(i(411),i(3)),l=i(9),d=i(45),u=i.n(d),h=i(381),v=i(59),m=["owner","env"],p=function(){function e(t){if(Object(c.a)(this,e),this.env=void 0,void 0!==t.particle_factory)throw new Error("Only one factory per env");this.env=t}return Object(l.a)(e,[{key:"create",value:function(e,t,i){return new f(e,t,Object(v.a)({env:this.env},i))}}]),e}(),f=function(){function e(t,i,n){var a=n.owner,r=n.env,o=Object(h.a)(n,m);Object(c.a)(this,e),this.env=void 0,this.particlesAdded=void 0,this.pos=void 0,this.options=void 0,this.running=void 0,this.owner=void 0,this.env=r,this.particlesAdded=0;var s=e.defaults;void 0===o&&(o=s),void 0===o.collisions&&(o.collisions=s.collisions),void 0===o.isStatic&&(o.isStatic=s.isStatic),void 0===o.size?o.size=s.size:"number"===typeof o.size&&(o.size={min:o.size,max:o.size}),void 0===o.amount&&(o.amount=s.amount),void 0===o.interval&&(o.interval=s.interval),void 0===o.velocity&&(o.velocity=s.velocity),void 0===o.velocity.direction?o.velocity.direction=s.velocity.direction:void 0===o.velocity.direction.x?o.velocity.direction.x=s.velocity.direction.x:void 0===o.velocity.direction.y&&(o.velocity.direction.y=s.velocity.direction.y),void 0===o.colors?o.colors=s.colors:"string"===typeof o.colors&&(o.colors=[o.colors]),void 0===o.delay&&(o.delay=s.delay),void 0===o.frictionAir&&(o.frictionAir=s.frictionAir),void 0===o.parent&&(o.parent=s.parent),void 0===o.collisionFilter&&(o.collisionFilter=s.collisionFilter),(void 0===o.amountPerTick||o.amountPerTick<1)&&(o.amountPerTick=s.amountPerTick),void 0===o.decaySpeed&&(o.decaySpeed=s.decaySpeed),o.decaySpeed<0&&(o.decaySpeed=0),o.decaySpeed>1&&(o.decaySpeed=1),o.collisions=!o.collisions,void 0===t&&(t=s.x),void 0===i&&(i=s.y);var l=o.velocity.direction;"string"===typeof l.y&&(l.y=l.y.toLowerCase(),"up"===l.y?o.velocity.direction.y=-1:"down"===l.y?o.velocity.direction.y=1:"none"===l.y&&(o.velocity.direction.y=0)),"string"===typeof l.x&&(l.x=l.x.toLowerCase(),"left"===l.x?o.velocity.direction.x=-1:"right"===l.x?o.velocity.direction.x=1:"none"===l.x&&(o.velocity.direction.x=0)),this.pos={x:t,y:i},this.options=o,this.running=!1,this.owner=a}return Object(l.a)(e,[{key:"stop",value:function(){var e=this,t=this.options.amount;this.options.amount=0,this.running=!1,requestAnimationFrame((function(){requestAnimationFrame((function(){e.options.amount=t}))}))}},{key:"start",value:function(){this.running=!0,this.particlesAdded=0,this.addParticle()}},{key:"addParticle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this,n=this.pos,a=n.x,r=n.y,o=this.options,s=o.delay/this.env.engine.timing.timeScale,c=o.size,l=o.colors,u=o.velocity,h=o.amount,m=o.interval,p=o.collisions,f=o.frictionAir,g=o.velocity.direction,b=o.collisionFilter,_=o.amountPerTick;if(e.numParticles++,this.particlesAdded++,void 0!==this.options.parent){var j=this.options.parent;if(n=j.position,this.pos=n,"Circle Body"===j.label){var w=Math.random()*Math.PI*2,x=Math.random()*j.circleRadius;a=x*Math.cos(w)+a,r=x*Math.sin(w)+r}else"Rectangle Body"===j.label&&(a=Math.random()*(j.bounds.max.x-j.bounds.min.x)+j.bounds.min.x,r=Math.random()*(j.bounds.max.y-j.bounds.min.y)+j.bounds.min.y)}var O="particle"+e.numParticles,k=y(c.min,c.max),S=l[Math.round(y(l.length))];if("random"===(S=void 0!==S?S:l[0])){var P=y(0,255),A=y(0,255),F=y(0,255);S="rgb("+P+", "+A+", "+F+")"}var B,C={friction:(B=this.options).friction,frictionStatic:B.frictionStatic,inertia:B.inertia},M=d.Bodies.polygon(a,r,6,k,Object(v.a)({isSensor:p,isStatic:this.options.isStatic,density:1,restitution:this.options.restituition,frictionAir:f,render:{fillStyle:S}},C));M.decaySpeed=o.decaySpeed,M.isParticle=!0,M.owner=this.owner,this.env.particles[O]=M,d.Composite.add(this.env.world,M),void 0!==b&&(M.collisionFilter=b);var T=y(0,u.x),E=y(0,u.y);void 0===u.y&&(E=y(0,2)),void 0===u.x&&(T=y(0,2)),void 0===g.x||0===g.x?T=Boolean(Math.round(y()))?T:-1*T:T*=g.x,void 0===g.y||0===g.y?E=Boolean(Math.round(y()))?E:-1*E:E*=g.y,d.Body.setVelocity(M,{x:T,y:E});var R=1;function D(){R-=o.decaySpeed*i.env.engine.timing.timeScale,M.circleRadius=k*R,M.circleRadius>o.decaySpeed?requestAnimationFrame(D):d.Composite.remove(i.env.world,M)}if(setTimeout(D,s),this.particlesAdded<h&&!t)if(m>0){var H=function e(){if(i.options.amount>0)if(N+=i.env.engine.timing.timeScale,void 0!==i.env.runner&&void 0!==i.env.runner.fps)if(N>=m/(1e3/i.env.runner.fps))if(_>1)for(var t=_;t--;)0!==t?i.addParticle(!0):i.addParticle();else i.addParticle();else requestAnimationFrame(e);else if(N>=m/16.67/i.env.engine.timing.timeScale)for(var n=_;n--;)0!==n?i.addParticle(!0):i.addParticle();else requestAnimationFrame(e);else i.running=!1},N=0;requestAnimationFrame(H)}else i.addParticle()}}]),e}();function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===e&&void 0===t?(e=0,t=1):void 0===t&&(t=e,e=0),Math.random()*(t-e)+e}f.numParticles=0,f.defaults={colors:["#FE601C","#EBDB14","#EB471F","#ED7A0E"],collisions:!1,isStatic:!1,x:window.innerWidth/2,y:window.innerHeight/2,size:{min:.5,max:2},amount:50,interval:0,amountPerTick:1,velocity:{x:5,y:5,direction:{x:"none",y:"none"}},delay:400,decaySpeed:.1,frictionAir:.02,parent:void 0,collisionFilter:void 0};var g=i(353),b=i.n(g),_="#F51720 #FA26A0 #F8D210 #2FF3E0".split(" ").map((function(e){return new b.a(e)})),j=function(){function e(t,i,n,a){var r=a.max_health,o=a.name,s=a.damage_per_ball;Object(c.a)(this,e),this.shape=void 0,this.health=void 0,this.max_health=void 0,this.died_at=void 0,this.damage_dealt=void 0,this.idx=void 0,this.env=void 0,this.world=void 0,this.color=void 0,this.original_color=void 0,this.emitter=void 0,this.name=void 0,this.damage_per_ball=void 0,this.idx=e.idx++,this.max_health=r,this.health=this.max_health,this.env=n,this.world=this.env.world,this.color=_[this.idx%_.length],this.original_color=_[this.idx%_.length],this.shape=this._build_shape(t,i),this.damage_per_ball=s,this.damage_dealt=0,this.died_at=null,this.name=o}return Object(l.a)(e,[{key:"_build_shape",value:function(e,t){var i={isStatic:!0,render:{fillStyle:this.color.string(),strokeStyle:"white",lineWidth:3},collisionFilter:this.collision_filter},n=d.Bodies.rectangle(e,t,30,30,i);return n.player=this,n}},{key:"collision_filter",get:function(){var e=1<<this.idx+1;return{category:e,mask:-1^e,group:0}}},{key:"build_emitter",value:function(){var e={amount:1/0,interval:1001,amountPerTick:1,size:{min:5,max:20},delay:1e4,collisions:!0,restituition:1,colors:this.original_color.string(),collisionFilter:this.collision_filter,frictionStatic:0,frictionAir:0,friction:0,decaySpeed:.03};this.emitter=this.env.particle_factory.create(this.x,this.y,Object(v.a)({owner:this},e)),this.emitter.start()}},{key:"x",get:function(){return this.shape.position.x}},{key:"y",get:function(){return this.shape.position.y}},{key:"take_damage",value:function(e){this.health-=e,this.health<=0&&this.die();var t=this.health/this.max_health;return this.color=this.color.alpha(t),this.shape.render.fillStyle=this.color.string(),e}},{key:"die",value:function(){console.log("Player ".concat(this.idx," DIED")),d.Composite.remove(this.world,this.shape),this.emitter.stop(),this.died_at=new Date}}]),e}();j.idx=0,u.a.Resolver._restingThresh=.1,u.a.Resolver._restingThreshTangent=1,console.clear(),window.H=600,window.W=800;var w=function(){function e(t){Object(c.a)(this,e),this.game_state_callback=void 0,this.engine=void 0,this.world=void 0,this.particle_factory=void 0,this.render=void 0,this.runner=void 0,this.particles=void 0,this.players=void 0,this.title="Env",this.for=">=0.14.2",this.particles={},this.engine=d.Engine.create({velocityIterations:8}),this.engine.gravity.scale=0,this.world=this.engine.world,this.particle_factory=new p(this),this.game_state_callback=t}return Object(l.a)(e,[{key:"setup",value:function(e,t){var i=d.Render.create({element:document.getElementById(e),engine:this.engine,options:{width:800,height:600,wireframes:!1,showDebug:!1,showAngleIndicator:!0}});this.render=i,d.Render.run(i),this.runner=d.Runner.create(),this.build_play_field(),this.add_mouse_control(),this.build_players(t),this.update_game_state(),this.register_events(),d.Runner.run(this.runner,this.engine),d.Render.lookAt(i,{min:{x:0,y:0},max:{x:800,y:600}})}},{key:"add_mouse_control",value:function(){var e=d.Mouse.create(this.render.canvas),t=d.MouseConstraint.create(this.engine,{mouse:e,constraint:{stiffness:2e-4,render:{visible:!0}}});d.Composite.add(this.world,t),this.render.mouse=e}},{key:"stop",value:function(){u.a.Render.stop(this.render),u.a.Runner.stop(this.runner)}},{key:"get_player_coords",value:function(e){if(2!==e)throw new Error("only 2 players supported");return[[121,window.H/2],[window.W-121,window.H/2]]}},{key:"build_players",value:function(e){var t=this;this.players=[];var i=this.get_player_coords(e.length);e.forEach((function(e,n){var a=Object(s.a)(i[n],2),r=a[0],o=a[1],c=new j(r,o,t,e);t.players.push(c),d.Composite.add(t.world,c.shape)})),this.players.map((function(e){return e.build_emitter()}))}},{key:"build_play_field",value:function(){var e={isStatic:!0};d.Composite.add(this.world,[d.Bodies.rectangle(400,0,800,100,e),d.Bodies.rectangle(400,600,800,100,e),d.Bodies.rectangle(800,300,100,600,e),d.Bodies.rectangle(0,300,100,600,e)])}},{key:"update_game_state",value:function(){var e=this;if(this.game_state_callback){var t=this.players.map((function(e){return{health:e.health,died_at:e.died_at||null,damage_dealt:e.damage_dealt}}));setTimeout((function(){return e.game_state_callback(t)}),0)}}},{key:"register_events",value:function(){var e=this;d.Events.on(this.engine,"collisionStart",(function(t){var i=t.pairs;i=i.filter((function(e,t){return e.bodyA.player||e.bodyB.player}));for(var n=0;n<i.length;n++){var a=i[n],r=a.bodyA.player?a.bodyA:a.bodyB,o=a.bodyA.player?a.bodyB:a.bodyA,s=r.player;o.isParticle&&(d.Composite.remove(e.world,o),x(o.position,e.particle_factory));var c=o.owner.damage_per_ball;s.take_damage(c),o.owner,o.owner.damage_dealt+=c,e.update_game_state()}}))}}]),e}();function x(e,t){t.create(e.x,e.y,{collisions:!1,amount:40,amountPerTick:10,interval:1,collisionFilter:{group:-1}}).start()}var O=i(17),k=i(356),S=i(354),P=i(355),A=i.n(P),F=i(39),B=[{Header:"Health",accessor:"game.health",Cell:R},{Header:"Died at",accessor:"game.died_at_string",Cell:R},{Header:"Rank",accessor:"game.rank",Cell:R},{Header:"Damage Dealt",accessor:"game.damage_dealt",Cell:R}],C={max_health:"Max Health",name:"Player Name",damage_per_ball:"Damage per Ball"};function M(e,t,i){return Object.entries(t).map((function(e){var n=Object(s.a)(e,2),a=n[0];n[1];return function(e,t,i){var n=i?" x ".concat(i):"";return{Header:D({attribute_label:"".concat(C[e]),stat:t,multiplier_str:n}),Cell:E,accessor:e}}(a,t[a],i[a])}))}function T(e){e.stats;var t=e.attributes,i=e.stats_to_attributes,a=e.game_state,r=e.start_time,o=e.multipliers,s=Object(n.useMemo)((function(){var e=M(0,i,o);return[e[0]].concat(B,Object(O.a)(e.splice(1)))}),[t,o,i]),c=Object(n.useMemo)((function(){return function(e,t,i){if(null===e)return t;for(var n=function(e){var t=Object(O.a)(new Set(e)).sort((function(e,t){return t-e})),i=new Map(t.map((function(e,t){return[e,t+1]})));return e.map((function(e){return i.get(e)}))}(e.map((function(e){return null!==e.died_at?e.died_at.getTime():1/0}))),a=A()(t),r=0;r<a.length;r++)a[r].game=Object(v.a)({},e[r]),null!==a[r].game.died_at&&(a[r].game.died_at_string=((a[r].game.died_at-i)/1e3).toFixed(1)+"s"),null!==n&&(a[r].game.rank=n[r]);return a}(a,t,r)}),[a,t,r]),l=Object(S.useTable)({columns:s,data:c}),d=l.getTableProps,u=l.getTableBodyProps,h=l.headerGroups,m=l.rows,p=l.prepareRow;return Object(F.jsxs)(k.a,Object(v.a)(Object(v.a)({},d()),{},{striped:!0,bordered:!0,hover:!0,children:[Object(F.jsx)("thead",{children:h.map((function(e){return Object(F.jsx)("tr",Object(v.a)(Object(v.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(F.jsx)("th",Object(v.a)(Object(v.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(F.jsx)("tbody",Object(v.a)(Object(v.a)({},u()),{},{children:m.map((function(e){return p(e),Object(F.jsx)("tr",Object(v.a)(Object(v.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(F.jsx)("td",Object(v.a)(Object(v.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))}function E(e){e.column,e.row;var t=e.value;e.cell;return Object(F.jsxs)("div",{className:"",children:[" ",t," "]})}function R(e){e.column,e.row;var t=e.value,i=(e.cell,Object(n.useRef)(null)),a=Object(n.useRef)(t);return Object(n.useEffect)((function(){a.current!==t&&(i.current.className="",setTimeout((function(){i.current.className="color-animation"}),30)),a.current=t})),Object(F.jsxs)("div",{className:"",ref:i,children:[" ",t," "]})}function D(e){var t=e.attribute_label,i=e.stat,n=e.multiplier_str;return Object(F.jsxs)("div",{className:"px-0 mx-0 text-nowrap",children:[Object(F.jsxs)("span",{className:"pr-0 flex-grow-0 ",children:[" ",t]}),Object(F.jsxs)("span",{className:"pl-0 flex-grow-0",children:[" ",Object(F.jsxs)("span",{className:"font-weight-light",children:[Object(F.jsxs)("span",{children:[" "," = "," "]}),Object(F.jsx)("span",{className:"text-info font-weight-bold",children:i}),Object(F.jsx)("span",{children:n})]})]})]})}i(421);var H=i(380),N=i(18),z=i(102),I=function(){function e(){Object(c.a)(this,e),this.multipliers={}}return Object(l.a)(e,[{key:"normalize_stat",value:function(e,t){var i=e.mean(),n=Math.pow(10,Math.round(Math.log10(t/i))),a=[.2,.5,1,2,5],r=a.map((function(e){return Math.abs(t-i*n*e)}));return n*=a[L(r)],this.multipliers[e.column_names]=n,e.mul(n)}}]),e}();var q,L=(q=function(e,t){return t[0]<e[0]?t:e},function(e){return e.map((function(e,t){return[e,t]})).reduce(q)[1]}),W=i(378),G=i(51);function J(e){var t=e.env;function i(e,i){t.players[e].take_damage(i),t.update_game_state()}return Object(F.jsxs)("div",{children:[Object(F.jsx)("h1",{children:"DEBUG MODE ON!"}),Object(F.jsxs)("div",{children:[Object(F.jsx)("button",{className:"btn btn-danger",onClick:function(){return i(0,20)},children:" Damage p0 "}),Object(F.jsx)("button",{className:"btn btn-danger",onClick:function(){return i(1,20)},children:" Damage p1 "})]})]})}window.env=new w;var V=[{team:"Vasco",goals:52,victories:22},{team:"Botafogo",goals:65,victories:22}],U={name:"team",max_health:"goals",damage_per_ball:"victories"},K=function(e,t){var i,n=[],a=Object(N.a)(e);try{for(a.s();!(i=a.n()).done;){var r=i.value,o={};for(var s in t){var c=t[s];o[s]=r[c]}n.push(o)}}catch(l){a.e(l)}finally{a.f()}return function(e){var t,i=new I,n=new z.a(e);for(var a in window.df=n,t={damage_per_ball:i.normalize_stat(n.damage_per_ball,20),max_health:i.normalize_stat(n.max_health,100),name:n.name})t[a]=t[a].values;var r=(t=new z.a(t)).columns;return[t=(t=t.values).map((function(e){return function(e,t){for(var i={},n=0;n<e.length;++n)i[e[n]]=t[n];return i}(r,e)})),i.multipliers]}(n)}(V,U),Q=Object(s.a)(K,2),X=Q[0],Y=Q[1];var Z=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),i=t[0],a=t[1],r=Object(n.useState)(new Date),o=Object(s.a)(r,2),c=o[0],l=o[1];return window.env.game_state_callback=a,Object(n.useEffect)((function(){window.document.getElementById("canvas").innerHTML="",window.env.setup("canvas",X)}),[]),Object(F.jsxs)(W.a,{children:[Object(F.jsx)(G.a,{path:/.*\/debug/,children:Object(F.jsx)(J,{env:window.env})}),Object(F.jsx)(G.a,{path:"/",children:Object(F.jsxs)("div",{className:"App",children:[Object(F.jsx)(H.a,{onClick:function(){window.env=new w(a),window.document.getElementById("canvas").innerHTML="",window.env.setup("canvas",X),l(new Date)},children:" RESTART "}),Object(F.jsx)(T,{stats:V,attributes:X,stats_to_attributes:U,game_state:i,start_time:c,multipliers:Y})]})})]})},$=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,592)).then((function(t){var i=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;i(e),n(e),a(e),r(e),o(e)}))};o.a.render(Object(F.jsx)(a.a.StrictMode,{children:Object(F.jsx)(Z,{})}),document.getElementById("root")),$()}},[[589,1,2]]]);
//# sourceMappingURL=main.357e8de8.chunk.js.map