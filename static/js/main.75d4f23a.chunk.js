(this.webpackJsonpstat_wars=this.webpackJsonpstat_wars||[]).push([[0],{26:function(e,t,i){},27:function(e,t,i){},41:function(e,t,i){"use strict";i.r(t);var n=i(1),a=i.n(n),o=i(17),r=i.n(o),s=(i(26),i(15)),c=(i(27),i(5)),l=i(6),d=i(0),h=i.n(d),u=i(21),v=i(2),m=function(){function e(t){if(Object(c.a)(this,e),void 0!==t.particles)throw new Error("Only one factory per env");this.env=t,this.env.particles={}}return Object(l.a)(e,[{key:"create",value:function(e,t,i){return new y(e,t,Object(v.a)({env:this.env},i))}}]),e}(),y=function(){function e(t,i,n){var a=n.owner,o=n.env,r=Object(u.a)(n,["owner","env"]);Object(c.a)(this,e),this.env=o,this.particlesAdded=0;var s=e.defaults;void 0===r&&(r=s),void 0===r.collisions&&(r.collisions=s.collisions),void 0===r.isStatic&&(r.isStatic=s.isStatic),void 0===r.size?r.size=s.size:"number"===typeof r.size&&(r.size={min:r.size,max:r.size}),void 0===r.amount&&(r.amount=s.amount),void 0===r.interval&&(r.interval=s.interval),void 0===r.velocity&&(r.velocity=s.velocity),void 0===r.velocity.direction?r.velocity.direction=s.velocity.direction:void 0===r.velocity.direction.x?r.velocity.direction.x=s.velocity.direction.x:void 0===r.velocity.direction.y&&(r.velocity.direction.y=s.velocity.direction.y),void 0===r.colors?r.colors=s.colors:"string"===typeof r.colors&&(r.colors=[r.colors]),void 0===r.delay&&(r.delay=s.delay),void 0===r.frictionAir&&(r.frictionAir=s.frictionAir),void 0===r.parent&&(r.parent=s.parent),void 0===r.collisionFilter&&(r.collisionFilter=s.collisionFilter),(void 0===r.amountPerTick||r.amountPerTick<1)&&(r.amountPerTick=s.amountPerTick),void 0===r.decaySpeed&&(r.decaySpeed=s.decaySpeed),r.decaySpeed<0&&(r.decaySpeed=0),r.decaySpeed>1&&(r.decaySpeed=1),r.collisions=!r.collisions,void 0===t&&(t=s.x),void 0===i&&(i=s.y);var l=r.velocity.direction;"string"===typeof l.y&&(l.y=l.y.toLowerCase(),"up"===l.y?r.velocity.direction.y=-1:"down"===l.y?r.velocity.direction.y=1:"none"===l.y&&(r.velocity.direction.y=0)),"string"===typeof l.x&&(l.x=l.x.toLowerCase(),"left"===l.x?r.velocity.direction.x=-1:"right"===l.x?r.velocity.direction.x=1:"none"===l.x&&(r.velocity.direction.x=0)),this.pos={x:t,y:i},this.options=r,this.running=!1,this.owner=a}return Object(l.a)(e,[{key:"stop",value:function(){var e=this,t=this.options.amount;this.options.amount=0,this.running=!1,requestAnimationFrame((function(){requestAnimationFrame((function(){e.options.amount=t}))}))}},{key:"start",value:function(){this.running=!0,this.particlesAdded=0,this.addParticle()}},{key:"addParticle",value:function(e){var t=this,i=this.pos,n=i.x,a=i.y,o=this.options,r=o.delay/this.env.engine.timing.timeScale,s=o.size,c=o.colors,l=o.velocity,h=o.amount,u=o.interval,m=o.collisions,y=o.frictionAir,f=o.velocity.direction,g=o.collisionFilter,b=o.amountPerTick;if(this.numParticles++,this.particlesAdded++,void 0!==this.options.parent){var w=this.options.parent;if(i=w.position,this.pos=i,"Circle Body"===w.label){var _=Math.random()*Math.PI*2,x=Math.random()*w.circleRadius;n=x*Math.cos(_)+n,a=x*Math.sin(_)+a}else"Rectangle Body"===w.label&&(n=Math.random()*(w.bounds.max.x-w.bounds.min.x)+w.bounds.min.x,a=Math.random()*(w.bounds.max.y-w.bounds.min.y)+w.bounds.min.y)}var j="particle"+this.numParticles,O=p(s.min,s.max),k=c[Math.round(p(c.length))];"random"===(k=void 0!==k?k:c[0])&&(k="rgb("+p(0,255)+", "+p(0,255)+", "+p(0,255)+")");var S,P={friction:(S=this.options).friction,frictionStatic:S.frictionStatic,inertia:S.inertia};this.env.particles[j]=d.Bodies.polygon(n,a,6,O,Object(v.a)({isSensor:m,isParticle:!0,isStatic:this.options.isStatic,density:1,restitution:this.options.restituition,frictionAir:y,decaySpeed:o.decaySpeed,render:{fillStyle:k}},P));var A=this.env.particles[j];A.owner=this.owner,d.World.add(this.env.world,A),void 0!==g&&(A.collisionFilter=g);var F=p(0,l.x),T=p(0,l.y);void 0===l.y&&(T=p(0,2)),void 0===l.x&&(F=p(0,2)),void 0===f.x||0===f.x?F=Boolean(Math.round(p()))?F:-1*F:F*=f.x,void 0===f.y||0===f.y?T=Boolean(Math.round(p()))?T:-1*T:T*=f.y,d.Body.setVelocity(A,{x:F,y:T});var B=1;if(setTimeout((function e(){B-=o.decaySpeed*t.env.engine.timing.timeScale,A.circleRadius=O*B,A.circleRadius>o.decaySpeed?requestAnimationFrame(e):d.Composite.remove(t.env.world,A)}),r),this.particlesAdded<h&&!e)if(u>0){var M=0;requestAnimationFrame((function e(){if(t.options.amount>0)if(M+=t.env.engine.timing.timeScale,void 0!==t.env.runner&&void 0!==t.env.runner.fps)if(M>=u/(1e3/t.env.runner.fps))if(b>1)for(var i=b;i--;)0!==i?t.addParticle(!0):t.addParticle();else t.addParticle();else requestAnimationFrame(e);else if(M>=u/16.67/t.env.engine.timing.timeScale)for(var n=b;n--;)0!==n?t.addParticle(!0):t.addParticle();else requestAnimationFrame(e);else t.running=!1}))}else this.addParticle()}}]),e}();function p(e,t){return void 0===e&&void 0===t?(e=0,t=1):void 0===t&&(t=e,e=0),Math.random()*(t-e)+e}y.numParticles=0,y.defaults={colors:["#FE601C","#EBDB14","#EB471F","#ED7A0E"],collisions:!1,isStatic:!1,x:window.innerWidth/2,y:window.innerHeight/2,size:{min:.5,max:2},amount:50,interval:0,amountPerTick:1,velocity:{x:5,y:5,direction:{x:"none",y:"none"}},delay:400,decaySpeed:.1,frictionAir:.02,parent:void 0,collisionFilter:void 0};var f=i(14),g=i.n(f),b=(h.a.Engine,h.a.Render,h.a.Runner,h.a.Composites,h.a.Composite),w=(h.a.Common,h.a.World,h.a.Bodies),_=(h.a.Grid,h.a.MouseConstraint,h.a.Mouse,h.a.Body,h.a.Events,function(){function e(t,i,n){Object(c.a)(this,e),this.idx=e.idx++,this.max_health=100,this.health=this.max_health,this.env=n,this.world=this.env.world,this.color=e.pallete[this.idx%e.pallete.length],this.original_color=e.pallete[this.idx%e.pallete.length],this.shape=this._build_shape(t,i),this.damage_dealt=0}return Object(l.a)(e,[{key:"_build_shape",value:function(e,t){var i={isStatic:!0,render:{fillStyle:this.color.string(),strokeStyle:"white",lineWidth:3},collisionFilter:this.collision_filter},n=w.rectangle(e,t,30,30,i);return n.player=this,n.is_player=!0,n}},{key:"collision_filter",get:function(){var e=1<<this.idx+1;return{category:e,mask:-1^e,group:0}}},{key:"build_emitter",value:function(){var e={amount:1/0,interval:1001,amountPerTick:1,size:{min:5,max:20},delay:1e4,collisions:!0,restituition:1,colors:this.original_color.string(),collisionFilter:this.collision_filter,frictionStatic:0,frictionAir:0,friction:0,decaySpeed:.03};this.emmiter=this.env.particle_factory.create(this.x,this.y,Object(v.a)({owner:this},e)),this.emmiter.start()}},{key:"x",get:function(){return this.shape.position.x}},{key:"y",get:function(){return this.shape.position.y}},{key:"take_damage",value:function(e){this.health-=e,this.health<=0&&this.die();var t=this.health/this.max_health;return this.color=this.color.alpha(t),this.shape.render.fillStyle=this.color.string(),e}},{key:"die",value:function(){console.log("Player ".concat(this.idx," DIED")),b.remove(this.world,this.shape),this.emmiter.stop(),this.dead=!0,this.died_at=new Date}}],[{key:"pallete",get:function(){return"#F51720 #FA26A0 #F8D210 #2FF3E0".split(" ").map((function(e){return new g.a(e)}))}}]),e}());_.idx=0,h.a.Resolver._restingThresh=.1,h.a.Resolver._restingThreshTangent=1,console.clear();var x=h.a.Engine,j=h.a.Render,O=h.a.Runner,k=(h.a.Composites,h.a.Composite),S=(h.a.Common,h.a.World,h.a.Bodies),P=(h.a.Grid,h.a.MouseConstraint),A=h.a.Mouse,F=(h.a.Body,h.a.Events);window.H=600,window.W=800;var T=function(){function e(t){Object(c.a)(this,e),this.title="Env",this.for=">=0.14.2",this.game_data_callback=t}return Object(l.a)(e,[{key:"setup",value:function(e){this.engine=x.create({velocityIterations:8}),this.engine.gravity.scale=0,this.world=this.engine.world,this.particle_factory=new m(this);var t=j.create({element:document.getElementById(e),engine:this.engine,options:{width:800,height:600,showAngleIndicator:!0,showDebug:!1,wireframes:!1}});this.render=t,j.run(t);var i=O.create();this.build_play_field(),this.add_mouse_control(),this.build_players(),this.register_events(),O.run(i,this.engine),j.lookAt(t,{min:{x:0,y:0},max:{x:800,y:600}}),this.update_game_data()}},{key:"add_mouse_control",value:function(){var e=A.create(this.render.canvas),t=P.create(this.engine,{mouse:e,constraint:{stiffness:.2,render:{visible:!0}}});k.add(this.world,t),this.render.mouse=e}},{key:"stop",value:function(){h.a.Render.stop(this.render),h.a.Runner.stop(this.runner)}},{key:"build_players",value:function(e){var t=new _(120,window.H/2,this),i=new _(window.W-120,window.H/2,this);k.add(this.world,t.shape),k.add(this.world,i.shape),this.players=[t,i],this.players.map((function(e){return e.build_emitter()}))}},{key:"build_play_field",value:function(){var e={isStatic:!0};k.add(this.world,[S.rectangle(400,0,800,100,e),S.rectangle(400,600,800,100,e),S.rectangle(800,300,100,600,e),S.rectangle(0,300,100,600,e)])}},{key:"update_game_data",value:function(){if(this.game_data_callback){var e=this.players.map((function(e){return{health:e.health,died_at:e.died_at||null,damage_dealt:e.damage_dealt}}));this.game_data_callback(e)}}},{key:"register_events",value:function(){var e=this;F.on(this.engine,"collisionStart",(function(t){var i=t.pairs;i=i.filter((function(e,t){return e.bodyA.is_player||e.bodyB.is_player}));for(var n=0;n<i.length;n++){var a=i[n],o=a.bodyA.is_player?a.bodyA:a.bodyB,r=a.bodyA.is_player?a.bodyB:a.bodyA;o=o.player,r.isParticle&&(k.remove(this.world,r),B(r.position,e.particle_factory));var s=o.take_damage(51);r.owner,r.owner.damage_dealt+=s,e.update_game_data()}}))}}]),e}();function B(e,t){t.create(e.x,e.y,{collisions:!1,amount:40,amountPerTick:10,interval:1,collisionFilter:{group:-1}}).start()}var M=i(12),C=i(19),E=i(18),H=i(3),R=[{Header:"Health",accessor:"game.health"},{Header:"Died at",accessor:"game.died_at"},{Header:"Damage Dealt",accessor:"game.damage_dealt"}];function D(e){for(var t=Object(M.a)(e.stats),i=Object(n.useMemo)((function(){var t=Object(M.a)(e.columns);return void 0===e.columns?[]:[t[0]].concat(R,Object(M.a)(t.splice(1)))}),[e.columns]),a=0;a<e.stats.length;a++)void 0!==e.game_data[a]&&(t[a].game=Object(v.a)({},e.game_data[a]),null!==t[a].game.died_at&&(t[a].game.died_at=((t[a].game.died_at-e.start_time)/1e3).toFixed(1)+"s"));var o=Object(E.useTable)({columns:i,data:t}),r=o.getTableProps,s=o.getTableBodyProps,c=o.headerGroups,l=o.rows,d=o.prepareRow;return Object(H.jsxs)(C.a,Object(v.a)(Object(v.a)({},r()),{},{striped:!0,bordered:!0,hover:!0,children:[Object(H.jsx)("thead",{children:c.map((function(e){return Object(H.jsx)("tr",Object(v.a)(Object(v.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(H.jsx)("th",Object(v.a)(Object(v.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(H.jsx)("tbody",Object(v.a)(Object(v.a)({},s()),{},{children:l.map((function(e){return d(e),Object(H.jsx)("tr",Object(v.a)(Object(v.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(H.jsx)("td",Object(v.a)(Object(v.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))}i(40);var z=i(20);window.env=new T;var I=[{name:"Team1",goals:2},{name:"Team2",goals:5}],W=[{Header:"Nome | Player",accessor:"name"},{Header:"Gols | Max Health",accessor:"goals"}],q=I;var L=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),i=t[0],a=t[1],o=Object(n.useState)(new Date),r=Object(s.a)(o,2),c=r[0],l=r[1];return window.env.game_data_callback=a,Object(n.useEffect)((function(){window.document.getElementById("canvas").innerHTML="",window.env.setup("canvas",q)}),[]),Object(H.jsxs)("div",{className:"App",children:[Object(H.jsx)(z.a,{onClick:function(){window.env=new T(a),window.document.getElementById("canvas").innerHTML="",window.env.setup("canvas",q),l(new Date)},children:" RESTART "}),Object(H.jsx)(D,{stats:I,columns:W,game_data:i,start_time:c})]})},G=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,42)).then((function(t){var i=t.getCLS,n=t.getFID,a=t.getFCP,o=t.getLCP,r=t.getTTFB;i(e),n(e),a(e),o(e),r(e)}))};r.a.render(Object(H.jsx)(a.a.StrictMode,{children:Object(H.jsx)(L,{})}),document.getElementById("root")),G()}},[[41,1,2]]]);
//# sourceMappingURL=main.75d4f23a.chunk.js.map