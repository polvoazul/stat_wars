(this.webpackJsonpstat_wars=this.webpackJsonpstat_wars||[]).push([[0],{349:function(e,t){},383:function(e,t,i){},384:function(e,t,i){},399:function(e,t){},400:function(e,t){},408:function(e,t){},411:function(e,t){},412:function(e,t){},559:function(e,t){},560:function(e,t){},561:function(e,t,i){"use strict";i.r(t);var n=i(44),o=i.n(n),a=i(351),r=i.n(a),s=(i(383),i(6)),c=(i(384),i(4)),d=i(9),l=i(45),h=i.n(l),u=i(377),v=i(58),m=function(){function e(t){if(Object(c.a)(this,e),this.env=void 0,void 0!==t.particle_factory)throw new Error("Only one factory per env");this.env=t}return Object(d.a)(e,[{key:"create",value:function(e,t,i){return new y(e,t,Object(v.a)({env:this.env},i))}}]),e}(),y=function(){function e(t,i,n){var o=n.owner,a=n.env,r=Object(u.a)(n,["owner","env"]);Object(c.a)(this,e),this.env=void 0,this.particlesAdded=void 0,this.pos=void 0,this.options=void 0,this.running=void 0,this.owner=void 0,this.env=a,this.particlesAdded=0;var s=e.defaults;void 0===r&&(r=s),void 0===r.collisions&&(r.collisions=s.collisions),void 0===r.isStatic&&(r.isStatic=s.isStatic),void 0===r.size?r.size=s.size:"number"===typeof r.size&&(r.size={min:r.size,max:r.size}),void 0===r.amount&&(r.amount=s.amount),void 0===r.interval&&(r.interval=s.interval),void 0===r.velocity&&(r.velocity=s.velocity),void 0===r.velocity.direction?r.velocity.direction=s.velocity.direction:void 0===r.velocity.direction.x?r.velocity.direction.x=s.velocity.direction.x:void 0===r.velocity.direction.y&&(r.velocity.direction.y=s.velocity.direction.y),void 0===r.colors?r.colors=s.colors:"string"===typeof r.colors&&(r.colors=[r.colors]),void 0===r.delay&&(r.delay=s.delay),void 0===r.frictionAir&&(r.frictionAir=s.frictionAir),void 0===r.parent&&(r.parent=s.parent),void 0===r.collisionFilter&&(r.collisionFilter=s.collisionFilter),(void 0===r.amountPerTick||r.amountPerTick<1)&&(r.amountPerTick=s.amountPerTick),void 0===r.decaySpeed&&(r.decaySpeed=s.decaySpeed),r.decaySpeed<0&&(r.decaySpeed=0),r.decaySpeed>1&&(r.decaySpeed=1),r.collisions=!r.collisions,void 0===t&&(t=s.x),void 0===i&&(i=s.y);var d=r.velocity.direction;"string"===typeof d.y&&(d.y=d.y.toLowerCase(),"up"===d.y?r.velocity.direction.y=-1:"down"===d.y?r.velocity.direction.y=1:"none"===d.y&&(r.velocity.direction.y=0)),"string"===typeof d.x&&(d.x=d.x.toLowerCase(),"left"===d.x?r.velocity.direction.x=-1:"right"===d.x?r.velocity.direction.x=1:"none"===d.x&&(r.velocity.direction.x=0)),this.pos={x:t,y:i},this.options=r,this.running=!1,this.owner=o}return Object(d.a)(e,[{key:"stop",value:function(){var e=this,t=this.options.amount;this.options.amount=0,this.running=!1,requestAnimationFrame((function(){requestAnimationFrame((function(){e.options.amount=t}))}))}},{key:"start",value:function(){this.running=!0,this.particlesAdded=0,this.addParticle()}},{key:"addParticle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this,n=this.pos,o=n.x,a=n.y,r=this.options,s=r.delay/this.env.engine.timing.timeScale,c=r.size,d=r.colors,h=r.velocity,u=r.amount,m=r.interval,y=r.collisions,f=r.frictionAir,g=r.velocity.direction,b=r.collisionFilter,w=r.amountPerTick;if(e.numParticles++,this.particlesAdded++,void 0!==this.options.parent){var _=this.options.parent;if(n=_.position,this.pos=n,"Circle Body"===_.label){var x=Math.random()*Math.PI*2,j=Math.random()*_.circleRadius;o=j*Math.cos(x)+o,a=j*Math.sin(x)+a}else"Rectangle Body"===_.label&&(o=Math.random()*(_.bounds.max.x-_.bounds.min.x)+_.bounds.min.x,a=Math.random()*(_.bounds.max.y-_.bounds.min.y)+_.bounds.min.y)}var O="particle"+e.numParticles,k=p(c.min,c.max),S=d[Math.round(p(d.length))];if("random"===(S=void 0!==S?S:d[0])){var P=p(0,255),A=p(0,255),F=p(0,255);S="rgb("+P+", "+A+", "+F+")"}var B,M={friction:(B=this.options).friction,frictionStatic:B.frictionStatic,inertia:B.inertia},T=l.Bodies.polygon(o,a,6,k,Object(v.a)({isSensor:y,isStatic:this.options.isStatic,density:1,restitution:this.options.restituition,frictionAir:f,render:{fillStyle:S}},M));T.decaySpeed=r.decaySpeed,T.isParticle=!0,T.owner=this.owner,this.env.particles[O]=T,l.World.add(this.env.world,T),void 0!==b&&(T.collisionFilter=b);var E=p(0,h.x),R=p(0,h.y);void 0===h.y&&(R=p(0,2)),void 0===h.x&&(E=p(0,2)),void 0===g.x||0===g.x?E=Boolean(Math.round(p()))?E:-1*E:E*=g.x,void 0===g.y||0===g.y?R=Boolean(Math.round(p()))?R:-1*R:R*=g.y,l.Body.setVelocity(T,{x:E,y:R});var C=1;function H(){C-=r.decaySpeed*i.env.engine.timing.timeScale,T.circleRadius=k*C,T.circleRadius>r.decaySpeed?requestAnimationFrame(H):l.Composite.remove(i.env.world,T)}if(setTimeout(H,s),this.particlesAdded<u&&!t)if(m>0){var D=0;function z(){if(i.options.amount>0)if(D+=i.env.engine.timing.timeScale,void 0!==i.env.runner&&void 0!==i.env.runner.fps)if(D>=m/(1e3/i.env.runner.fps))if(w>1)for(var e=w;e--;)0!==e?i.addParticle(!0):i.addParticle();else i.addParticle();else requestAnimationFrame(z);else if(D>=m/16.67/i.env.engine.timing.timeScale)for(var t=w;t--;)0!==t?i.addParticle(!0):i.addParticle();else requestAnimationFrame(z);else i.running=!1}requestAnimationFrame(z)}else this.addParticle()}}]),e}();function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===e&&void 0===t?(e=0,t=1):void 0===t&&(t=e,e=0),Math.random()*(t-e)+e}y.numParticles=0,y.defaults={colors:["#FE601C","#EBDB14","#EB471F","#ED7A0E"],collisions:!1,isStatic:!1,x:window.innerWidth/2,y:window.innerHeight/2,size:{min:.5,max:2},amount:50,interval:0,amountPerTick:1,velocity:{x:5,y:5,direction:{x:"none",y:"none"}},delay:400,decaySpeed:.1,frictionAir:.02,parent:void 0,collisionFilter:void 0};var f=i(352),g=i.n(f),b="#F51720 #FA26A0 #F8D210 #2FF3E0".split(" ").map((function(e){return new g.a(e)})),w=function(){function e(t,i,n,o){var a=o.max_health,r=o.name;Object(c.a)(this,e),this.shape=void 0,this.health=void 0,this.max_health=void 0,this.died_at=void 0,this.damage_dealt=void 0,this.idx=void 0,this.env=void 0,this.world=void 0,this.color=void 0,this.original_color=void 0,this.emitter=void 0,this.name=void 0,this.idx=e.idx++,this.max_health=a,this.health=this.max_health,this.env=n,this.world=this.env.world,this.color=b[this.idx%b.length],this.original_color=b[this.idx%b.length],this.shape=this._build_shape(t,i),this.damage_dealt=0,this.died_at=null,this.name=r}return Object(d.a)(e,[{key:"_build_shape",value:function(e,t){var i={isStatic:!0,render:{fillStyle:this.color.string(),strokeStyle:"white",lineWidth:3},collisionFilter:this.collision_filter},n=l.Bodies.rectangle(e,t,30,30,i);return n.player=this,n}},{key:"collision_filter",get:function(){var e=1<<this.idx+1;return{category:e,mask:-1^e,group:0}}},{key:"build_emitter",value:function(){var e={amount:1/0,interval:1001,amountPerTick:1,size:{min:5,max:20},delay:1e4,collisions:!0,restituition:1,colors:this.original_color.string(),collisionFilter:this.collision_filter,frictionStatic:0,frictionAir:0,friction:0,decaySpeed:.03};this.emitter=this.env.particle_factory.create(this.x,this.y,Object(v.a)({owner:this},e)),this.emitter.start()}},{key:"x",get:function(){return this.shape.position.x}},{key:"y",get:function(){return this.shape.position.y}},{key:"take_damage",value:function(e){this.health-=e,this.health<=0&&this.die();var t=this.health/this.max_health;return this.color=this.color.alpha(t),this.shape.render.fillStyle=this.color.string(),e}},{key:"die",value:function(){console.log("Player ".concat(this.idx," DIED")),l.Composite.remove(this.world,this.shape),this.emitter.stop(),this.died_at=new Date}}]),e}();w.idx=0,h.a.Resolver._restingThresh=.1,h.a.Resolver._restingThreshTangent=1,console.clear(),window.H=600,window.W=800;var _=function(){function e(t){Object(c.a)(this,e),this.game_data_callback=void 0,this.engine=void 0,this.world=void 0,this.particle_factory=void 0,this.render=void 0,this.runner=void 0,this.particles=void 0,this.players=void 0,this.title="Env",this.for=">=0.14.2",this.game_data_callback=t,this.particles={},this.engine=l.Engine.create({velocityIterations:8}),this.engine.gravity.scale=0,this.world=this.engine.world,this.particle_factory=new m(this)}return Object(d.a)(e,[{key:"setup",value:function(e,t){var i=l.Render.create({element:document.getElementById(e),engine:this.engine,options:{width:800,height:600,wireframes:!1,showDebug:!1,showAngleIndicator:!0}});this.render=i,l.Render.run(i),this.runner=l.Runner.create(),this.build_play_field(),this.add_mouse_control(),this.build_players(t),this.register_events(),l.Runner.run(this.runner,this.engine),l.Render.lookAt(i,{min:{x:0,y:0},max:{x:800,y:600}}),this.update_game_data()}},{key:"add_mouse_control",value:function(){var e=l.Mouse.create(this.render.canvas),t=l.MouseConstraint.create(this.engine,{mouse:e,constraint:{stiffness:.2,render:{visible:!0}}});l.Composite.add(this.world,t),this.render.mouse=e}},{key:"stop",value:function(){h.a.Render.stop(this.render),h.a.Runner.stop(this.runner)}},{key:"get_player_coords",value:function(e){if(2!==e)throw new Error("only 2 players supported");return[[121,window.H/2],[window.W-121,window.H/2]]}},{key:"build_players",value:function(e){var t=this;this.players=[];var i=this.get_player_coords(e.length);e.forEach((function(e,n){var o=Object(s.a)(i[n],2),a=o[0],r=o[1],c=new w(a,r,t,e);t.players.push(c),l.Composite.add(t.world,c.shape)})),this.players.map((function(e){return e.build_emitter()}))}},{key:"build_play_field",value:function(){var e={isStatic:!0};l.Composite.add(this.world,[l.Bodies.rectangle(400,0,800,100,e),l.Bodies.rectangle(400,600,800,100,e),l.Bodies.rectangle(800,300,100,600,e),l.Bodies.rectangle(0,300,100,600,e)])}},{key:"update_game_data",value:function(){var e=this;if(this.game_data_callback){var t=this.players.map((function(e){return{health:e.health,died_at:e.died_at||null,damage_dealt:e.damage_dealt}}));setTimeout((function(){return e.game_data_callback(t)}),0)}}},{key:"register_events",value:function(){var e=this;l.Events.on(this.engine,"collisionStart",(function(t){var i=t.pairs;i=i.filter((function(e,t){return e.bodyA.player||e.bodyB.player}));for(var n=0;n<i.length;n++){var o=i[n],a=o.bodyA.player?o.bodyA:o.bodyB,r=o.bodyA.player?o.bodyB:o.bodyA,s=a.player;r.isParticle&&(l.Composite.remove(e.world,r),x(r.position,e.particle_factory));var c=s.take_damage(51);r.owner,r.owner.damage_dealt+=c,e.update_game_data()}}))}}]),e}();function x(e,t){t.create(e.x,e.y,{collisions:!1,amount:40,amountPerTick:10,interval:1,collisionFilter:{group:-1}}).start()}var j=i(17),O=i(354),k=i(353),S=i(61),P=[{Header:"Health",accessor:"game.health"},{Header:"Died at",accessor:"game.died_at_string"},{Header:"Rank",accessor:"game.rank"},{Header:"Damage Dealt",accessor:"game.damage_dealt"}];function A(e){for(var t=Object(j.a)(e.stats),i=Object(n.useMemo)((function(){var t=Object(j.a)(e.columns);return void 0===e.columns?[]:[t[0]].concat(P,Object(j.a)(t.splice(1)))}),[e.columns]),o=function(e){var t=Object(j.a)(new Set(e)).sort((function(e,t){return t-e})),i=new Map(t.map((function(e,t){return[e,t+1]})));return e.map((function(e){return i.get(e)}))}(t.map((function(e){return e.game?-e.game.died_at:0}))),a=0;a<e.stats.length;a++)void 0!==e.game_data[a]&&(t[a].game=Object(v.a)({},e.game_data[a]),null!==t[a].game.died_at&&(t[a].game.died_at_string=((t[a].game.died_at-e.start_time)/1e3).toFixed(1)+"s"),t[a].game.rank=o[a]);var r=Object(k.useTable)({columns:i,data:t}),s=r.getTableProps,c=r.getTableBodyProps,d=r.headerGroups,l=r.rows,h=r.prepareRow;return Object(S.jsxs)(O.a,Object(v.a)(Object(v.a)({},s()),{},{striped:!0,bordered:!0,hover:!0,children:[Object(S.jsx)("thead",{children:d.map((function(e){return Object(S.jsx)("tr",Object(v.a)(Object(v.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(S.jsx)("th",Object(v.a)(Object(v.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(S.jsx)("tbody",Object(v.a)(Object(v.a)({},c()),{},{children:l.map((function(e){return h(e),Object(S.jsx)("tr",Object(v.a)(Object(v.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(S.jsx)("td",Object(v.a)(Object(v.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))}i(394);var F=i(376),B=i(375),M=i(40);function T(e,t){var i=Math.pow(10,Math.round(Math.log10(t/e)));return console.log([e,t,i]),i}window.dfd=B,window.env=new _;var E=[{name:"Vasco",goals:2},{name:"Botafogo",goals:5}],R=[{Header:"Nome | Player",accessor:"name"},{Header:"Gols | Max Health",accessor:"goals"}],C=function(e){var t=new M.a(e);window.df=t;var i={max_health:t.goals.mul(T(t.goals.mean(),100)).values,name:t.name.values},n=(i=new M.a(i)).columns;return i=(i=i.values).map((function(e){return function(e,t){for(var i={},n=0;n<e.length;++n)i[e[n]]=t[n];return i}(n,e)})),console.log(i),i}(E);var H=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),i=t[0],o=t[1],a=Object(n.useState)(new Date),r=Object(s.a)(a,2),c=r[0],d=r[1];return window.env.game_data_callback=o,Object(n.useEffect)((function(){window.document.getElementById("canvas").innerHTML="",window.env.setup("canvas",C)}),[]),Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(F.a,{onClick:function(){window.env=new _(o),window.document.getElementById("canvas").innerHTML="",window.env.setup("canvas",C),d(new Date)},children:" RESTART "}),Object(S.jsx)(A,{stats:E,columns:R,game_data:i,start_time:c})]})},D=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,563)).then((function(t){var i=t.getCLS,n=t.getFID,o=t.getFCP,a=t.getLCP,r=t.getTTFB;i(e),n(e),o(e),a(e),r(e)}))};r.a.render(Object(S.jsx)(o.a.StrictMode,{children:Object(S.jsx)(H,{})}),document.getElementById("root")),D()}},[[561,1,2]]]);
//# sourceMappingURL=main.51cd09de.chunk.js.map